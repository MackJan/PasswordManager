{% extends "master.html" %}
{% load static %}

{% block title %}Recovery codes{% endblock %}

{% block content %}
<section class="page-header">
    <div>
        <h1 class="page-title">Recovery codes</h1>
        <p class="page-description">Store these codes in a secure place. Each code is single-use and acts as a backup when you can't access your authenticator.</p>
    </div>
</section>

<section class="card card-stack">
    <div class="alert-inline">
        Save these codes somewhere safe. Anyone with access can sign in to your account.
    </div>
    <div class="card card-compact">
        <div class="recovery-grid">
            {% for code in recovery_codes %}
            <div class="recovery-code" id="recovery-code-{{ forloop.counter }}">{{ code }}</div>
            {% endfor %}
        </div>
        <div class="page-actions">
            <button type="button" class="btn btn-secondary" data-action="print-recovery">
                <svg class="icon" aria-hidden="true" focusable="false">
                    <use href="{% static 'img/icons/print.svg' %}#icon-print"></use>
                </svg>
                Print
            </button>
            <button type="button" class="btn btn-secondary" data-download="recovery-codes-text" data-filename="vaultlock-recovery-codes.txt">
                <svg class="icon" aria-hidden="true" focusable="false">
                    <use href="{% static 'img/icons/download.svg' %}#icon-download"></use>
                </svg>
                Download
            </button>
            <button type="button" class="btn btn-secondary" data-copy="recovery-codes-text">
                <svg class="icon" aria-hidden="true" focusable="false">
                    <use href="{% static 'img/icons/copy.svg' %}#icon-copy"></use>
                </svg>
                Copy
            </button>
        </div>
    </div>
    <label class="info-row">
        <span class="info-label">Confirmation</span>
        <span class="info-value">
            <input type="checkbox" id="saved-codes" data-confirm-toggle="recovery-continue">
            I've stored these safely
        </span>
    </label>
    <div class="page-actions">
        <a href="{% url 'security_settings' %}" class="btn btn-ghost">Back to security</a>
        <button type="button" class="btn btn-primary" id="recovery-continue" data-redirect="{% url 'security_settings' %}" disabled>Continue</button>
    </div>
</section>

<div id="recovery-codes-text" class="visually-hidden">{{ recovery_codes|join:"\n" }}</div>
{% endblock %}
